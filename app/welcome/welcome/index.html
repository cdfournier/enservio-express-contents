<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Enservio | Welcome</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta id="apple-mobile-web-app-capable" name="apple-mobile-web-app-capable" content="yes">
    <!-- css -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.min.css">
    <link rel="stylesheet" href="https://maxcdn.icons8.com/fonts/line-awesome/1.1/css/line-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway:400,700">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:400,500,600,700">
    <link rel="stylesheet" href="../../../src/css/main.css">
  </head>
  <body>
    <main>
      <section data-qa="notifications">
        <div class="notification error">
          <div class="message">
            <p>This is where the error message goes</p>
          </div>
          <span class="dismiss error"><i class="la la-times-circle"></i></span>
        </div>
        <div class="notification confirm">
          <div class="message">
            <p>You have unsaved changes. If you continue those changes will be lost. Are you sure you want to continue?</p>
            <div class="action">
              <button class="button dismiss--yes"><span class="button-label">Yes</span></button>
              <button class="button dismiss--no"><span class="button-label">No</span></button>
            </div>
          </div>
        </div>
      </section>
      <section data-qa="welcome" class="welcome md">
        <div class="chat one hidden">
          <div class="chat-bot">
            <div class="small-avatar"><img src="../../../src/images/guide.jpg" align="Your Guide"></div>
            <div class="bubble">
              <p>Welcome back <b>Ashley</b>! I'm Jay. What do you want to do today?</p>
            </div>
          </div>
        </div>
        <div class="voice one hidden">
          <a id="listen-one" class="icon active animated pulse infinite listen one"><i class="la la-microphone"></i></a>
        </div>
        <div class="indicator one hidden">
          <div class="indicator-gauge">
            <span></span>
          </div>
        </div>
      </section>
      <section data-qa="loading" class="loading">
        <div class="logo">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 184.57 37.49"><path d="M98.56 26.26H80.83c-.54 5.1 6 8.71 13.27 4.53l2.23 4.26a23.69 23.69 0 0 1-2.7 1.37 20 20 0 0 1-9.31.79c-5.14-.64-8.49-3.94-9.52-9.53-1.28-7 1.88-13.06 7.93-15.32 5.55-2.08 14 0 16 7.26a13.94 13.94 0 0 1-.17 6.64zm-17.47-4.43h11.85c-.09-3.39-2.1-5.32-5.58-5.45s-5.79 1.93-6.27 5.45zM6.18 26.19c-.17 6 7.14 8.37 13.2 4.62l2.14 4.06c-4.7 3.74-14 3.31-18.14-.74-3-3-3.6-6.72-3.32-10.65.35-5 2.78-8.84 7.46-10.84a12.1 12.1 0 0 1 12.9 1.6c3.77 3 4.69 7.12 3.57 12zm12.2-4.37c-.17-3.43-2.1-5.28-5.6-5.44a5.77 5.77 0 0 0-6.25 5.44zM172.62 37.34c-7.56.35-12.41-5.07-12.12-13.46a12.83 12.83 0 0 1 4.28-9.66c4.87-4.31 17.1-4 19.31 6.08a17.82 17.82 0 0 1-.31 9.45 10.74 10.74 0 0 1-11.16 7.59zm-.56-4.72c3.08 0 4.9-1.22 5.81-4a13 13 0 0 0 .12-8.17c-.8-2.64-2.43-4-5-4.16a5.24 5.24 0 0 0-5.56 3.46 12.59 12.59 0 0 0 0 9.75 4.46 4.46 0 0 0 4.63 3.12zM34.34 18.9v17.85H28.7V12.23h4l1.08 1.94a10.66 10.66 0 0 1 10-2.17c3.55.91 6 3.28 6.24 6.78.4 5.95.11 12 .11 18h-5.45V23.33v-1.28c-.13-2-.38-4.08-2.51-5.08a6.17 6.17 0 0 0-6.46.76c-.48.32-.87.74-1.37 1.17zM54.69 35.38l1.89-4.2c1.75.54 3.38 1.11 5.06 1.52a6.74 6.74 0 0 0 2.1 0 2.16 2.16 0 0 0 2.24-1.65 2.71 2.71 0 0 0-1.06-3c-1.12-.75-2.37-1.29-3.54-2a28.66 28.66 0 0 1-4.4-2.58 6.3 6.3 0 0 1 1.66-10.93c4.09-1.71 8-1 12.06.8l-1.64 4.41a9.25 9.25 0 0 0-5.85-1.48 2.4 2.4 0 0 0-2.56 1.82 2.33 2.33 0 0 0 1.43 2.66c1.18.65 2.47 1.09 3.68 1.69a20.79 20.79 0 0 1 3.89 2.18 6.94 6.94 0 0 1-1.48 11.7 14.76 14.76 0 0 1-13.48-.94zM120.19 12.18h6.32l6 15.08c2.29-5.33 4.4-10.23 6.5-15.13h6.11c-3.89 8.5-7.67 16.79-11.48 25.12h-2.26c-3.7-8.29-7.39-16.57-11.19-25.07zM102.98 12.12h5.46l.44 1.83c3.33-2.65 6.86-3 10.86-1.46l-2.35 4.81c-.52-.19-1-.37-1.42-.51a5.33 5.33 0 0 0-7.14 4.6 19.88 19.88 0 0 0-.16 2.56v12.89h-5.69zM150.93 16.91l-3-.2V12.2h8.69v24.55h-5.69z" class="l-bod animated fadeInDown"/><path d="M153.32 0a3.2 3.2 0 0 1 3.31 3.13 3.42 3.42 0 0 1-3.29 3.27 3.33 3.33 0 0 1-3.29-3.22A3.21 3.21 0 0 1 153.32 0z" class="l-dot animated fadeInRight"/></svg>
        </div>
        <div class="indicator animated fadeInUp">
          <div class="indicator-gauge">
            <span></span>
          </div>
        </div>
      </section>
    </main>
    <!-- scripts -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/webrtc-adapter/6.4.0/adapter.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/annyang/2.6.1/annyang.min.js"></script>
    <script src="../../../src/scripts/express-contents.js"></script>
<!--
    <script>
      /* Demo video scripts here */
      $(document).ready(function() {
        setTimeout(function() {$('.loading .indicator-gauge span').addClass('loaded')}, 2000);
        setTimeout(function() {$('.loading').addClass('loaded')}, 5250);
        setTimeout(function() {$('.chat.one').removeClass('hidden')}, 5800);
        setTimeout(function() {$('.voice.one').removeClass('hidden')}, 6350);
        setTimeout(function() {$('.voice.one .icon').removeClass('active animated pulse infinite')}, 8850);
        setTimeout(function() {$('.voice.one .icon').addClass('inactive')}, 8850);
        setTimeout(function() {$('.indicator.one').removeClass('hidden')}, 9350);
        setTimeout(function() {$('.indicator.one .indicator-gauge span').addClass('loaded')}, 10350);
        setTimeout(function() {$(window.location.href = '../../field/room-01-setup/index.html')}, 12850);
      });
    </script>
-->
    <script>
      /* document ready script */
      $(document).ready(function() {
        setTimeout(function() {$('.loading .indicator-gauge span').addClass('loaded')}, 2000);
        setTimeout(function() {$('.loading').addClass('loaded')}, 5250);
        setTimeout(function() {$('.chat.one').removeClass('hidden')}, 5750);
        setTimeout(function() {$('.voice.one').removeClass('hidden')}, 6250);
      });
    </script>
    <script>
      /* web audio api script */
      if (navigator.mediaDevices === undefined) {
        navigator.mediaDevices = {};
      }
      
      if (navigator.mediaDevices.getUserMedia === undefined) {
        navigator.mediaDevices.getUserMedia = function(constraints) {
          // First get ahold of the legacy getUserMedia, if present
          let getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia;
      
          // Some browsers just don't implement it - return a rejected promise with an error
          // to keep a consistent interface
          if (!getUserMedia) {
            return Promise.reject(new Error('getUserMedia is not implemented in this browser'));
          }
      
          // Otherwise, wrap the call to the old navigator.getUserMedia with a Promise
          return new Promise(function(resolve, reject) {
            getUserMedia.call(navigator, constraints, resolve, reject);
          });
        }
      }
      
      navigator.mediaDevices.getUserMedia({
        audio: true
      }).then(function(stream) {
        successCallBack(stream);
      }).catch(function(error) {
        console.log('error: ',error);
      });
      
      function successCallback(stream){
        console.log('stream: ',stream);
      }
    </script>
    <script>
      /* click event scripts */
      $('#listen-one').click(function() {
        $('.voice.one .icon').removeClass('active animated pulse infinite');
        $('.voice.one .icon').addClass('inactive');
        setTimeout(function() {$('.indicator.one').removeClass('hidden')}, 500);
          setTimeout(function() {$('.indicator.one .indicator-gauge span').addClass('loaded')}, 1500);
          setTimeout(function() {$(window.location.href = '../../field/room-01-setup/index.html')}, 4750);
      });
    </script>
    <script>
      /* annyang speech recognition script */
      if (annyang) {

        // define functions
        var fieldInventory = function() {
          $('.voice.one .icon').removeClass('active animated pulse infinite');
          $('.voice.one .icon').addClass('inactive');
          setTimeout(function() {$('.indicator.one').removeClass('hidden')}, 1000);
          setTimeout(function() {$('.indicator.one .indicator-gauge span').addClass('loaded')}, 1500);
          setTimeout(function() {$(window.location.href = '../../field/room-01-setup/index.html')}, 4750);
        };

        var expressContents = function() {
          $('.voice.one .icon').removeClass('active animated pulse infinite');
          $('.voice.one .icon').addClass('inactive');
          setTimeout(function() {$('.indicator.one').removeClass('hidden')}, 1000);
          setTimeout(function() {$('.indicator.one .indicator-gauge span').addClass('loaded')}, 1500);
          setTimeout(function() {$(window.location.href = '../../express/setup/index.html')}, 4750);
        };

        // define commands
        var commands = {
          'field *tag': fieldInventory,
          'express *tag': expressContents,
        };

        // OPTIONAL: activate debug mode for detailed logging in the console
        annyang.debug();

        // add our commands to annyang
        annyang.addCommands(commands);

        // start listening.
        annyang.start();
      };
    </script>
  </body>
</html>